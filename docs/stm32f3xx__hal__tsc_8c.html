<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_tsc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('stm32f3xx__hal__tsc_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">stm32f3xx_hal_tsc.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file provides firmware functions to manage the following functionalities of the Touch Sensing Controller (TSC) peripheral:  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stm32f3xx__hal_8h_source.html">stm32f3xx_hal.h</a>&quot;</code><br />
</div><a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides firmware functions to manage the following functionalities of the Touch Sensing Controller (TSC) peripheral: </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team<ul>
<li>Initialization and De-initialization</li>
<li>Channel IOs, Shield IOs and Sampling IOs configuration</li>
<li>Start and Stop an acquisition</li>
<li>Read acquisition result</li>
<li>Interrupts and flags management</li>
</ul>
</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<p>Copyright (c) 2016 STMicroelectronics. All rights reserved.</p>
<p>This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-IS.</p>
<pre class="fragment">================================================================================
                       ##### TSC specific features #####
================================================================================
  [..]
  (#) Proven and robust surface charge transfer acquisition principle

  (#) Supports up to 3 capacitive sensing channels per group

  (#) Capacitive sensing channels can be acquired in parallel offering a very good
      response time

  (#) Spread spectrum feature to improve system robustness in noisy environments

  (#) Full hardware management of the charge transfer acquisition sequence

  (#) Programmable charge transfer frequency

  (#) Programmable sampling capacitor I/O pin

  (#) Programmable channel I/O pin

  (#) Programmable max count value to avoid long acquisition when a channel is faulty

  (#) Dedicated end of acquisition and max count error flags with interrupt capability

  (#) One sampling capacitor for up to 3 capacitive sensing channels to reduce the system
      components

  (#) Compatible with proximity, touchkey, linear and rotary touch sensor implementation

                          ##### How to use this driver #####
================================================================================
  [..]
    (#) Enable the TSC interface clock using __HAL_RCC_TSC_CLK_ENABLE() macro.

    (#) GPIO pins configuration
      (++) Enable the clock for the TSC GPIOs using __HAL_RCC_GPIOx_CLK_ENABLE() macro.
      (++) Configure the TSC pins used as sampling IOs in alternate function output Open-Drain mode,
           and TSC pins used as channel/shield IOs in alternate function output Push-Pull mode
           using HAL_GPIO_Init() function.

    (#) Interrupts configuration
      (++) Configure the NVIC (if the interrupt model is used) using HAL_NVIC_SetPriority()
           and HAL_NVIC_EnableIRQ() and function.

    (#) TSC configuration
      (++) Configure all TSC parameters and used TSC IOs using HAL_TSC_Init() function.

 [..]   TSC peripheral alternate functions are mapped on AF9.

  *** Acquisition sequence ***
  ===================================
  [..]
    (+) Discharge all IOs using HAL_TSC_IODischarge() function.
    (+) Wait a certain time allowing a good discharge of all capacitors. This delay depends
        of the sampling capacitor and electrodes design.
    (+) Select the channel IOs to be acquired using HAL_TSC_IOConfig() function.
    (+) Launch the acquisition using either HAL_TSC_Start() or HAL_TSC_Start_IT() function.
        If the synchronized mode is selected, the acquisition will start as soon as the signal
        is received on the synchro pin.
    (+) Wait the end of acquisition using either HAL_TSC_PollForAcquisition() or
        HAL_TSC_GetState() function or using WFI instruction for example.
    (+) Check the group acquisition status using HAL_TSC_GroupGetStatus() function.
    (+) Read the acquisition value using HAL_TSC_GroupGetValue() function.

     *** Callback registration ***
     =============================================

  [..]
     The compilation flag USE_HAL_TSC_REGISTER_CALLBACKS when set to 1
     allows the user to configure dynamically the driver callbacks.
     Use Functions HAL_TSC_RegisterCallback() to register an interrupt callback.

  [..]
     Function HAL_TSC_RegisterCallback() allows to register following callbacks:
       (+) ConvCpltCallback   : callback for conversion complete process.
       (+) ErrorCallback      : callback for error detection.
       (+) MspInitCallback    : callback for Msp Init.
       (+) MspDeInitCallback  : callback for Msp DeInit.
  [..]
     This function takes as parameters the HAL peripheral handle, the Callback ID
     and a pointer to the user callback function.

  [..]
     Use function HAL_TSC_UnRegisterCallback to reset a callback to the default
     weak function.
     HAL_TSC_UnRegisterCallback takes as parameters the HAL peripheral handle,
     and the Callback ID.
  [..]
     This function allows to reset following callbacks:
       (+) ConvCpltCallback   : callback for conversion complete process.
       (+) ErrorCallback      : callback for error detection.
       (+) MspInitCallback    : callback for Msp Init.
       (+) MspDeInitCallback  : callback for Msp DeInit.

  [..]
     By default, after the HAL_TSC_Init() and when the state is HAL_TSC_STATE_RESET
     all callbacks are set to the corresponding weak functions:
     examples HAL_TSC_ConvCpltCallback(), HAL_TSC_ErrorCallback().
     Exception done for MspInit and MspDeInit functions that are
     reset to the legacy weak functions in the HAL_TSC_Init()/ HAL_TSC_DeInit() only when
     these callbacks are null (not registered beforehand).
     If MspInit or MspDeInit are not null, the HAL_TSC_Init()/ HAL_TSC_DeInit()
     keep and use the user MspInit/MspDeInit callbacks (registered beforehand) whatever the state.

  [..]
     Callbacks can be registered/unregistered in HAL_TSC_STATE_READY state only.
     Exception done MspInit/MspDeInit functions that can be registered/unregistered
     in HAL_TSC_STATE_READY or HAL_TSC_STATE_RESET state,
     thus registered (user) MspInit/DeInit callbacks can be used during the Init/DeInit.
     Then, the user first registers the MspInit/MspDeInit user callbacks
     using HAL_TSC_RegisterCallback() before calling HAL_TSC_DeInit()
     or HAL_TSC_Init() function.

  [..]
     When the compilation flag USE_HAL_TSC_REGISTER_CALLBACKS is set to 0 or
     not defined, the callback registration feature is not available and all callbacks
     are set to the corresponding weak functions.</pre><p>Table 1. IOs for the STM32F3xx devices +-----------------------------&mdash;+ </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">IOs   </th><th class="markdownTableHeadNone">TSC functions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA0 (AF)   </td><td class="markdownTableBodyNone">TSC_G1_IO1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA1 (AF)   </td><td class="markdownTableBodyNone">TSC_G1_IO2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA2 (AF)   </td><td class="markdownTableBodyNone">TSC_G1_IO3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA3 (AF)   </td><td class="markdownTableBodyNone">TSC_G1_IO4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA4 (AF)   </td><td class="markdownTableBodyNone">TSC_G2_IO1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA5 (AF)   </td><td class="markdownTableBodyNone">TSC_G2_IO2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA6 (AF)   </td><td class="markdownTableBodyNone">TSC_G2_IO3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA7 (AF)   </td><td class="markdownTableBodyNone">TSC_G2_IO4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PC5 (AF)   </td><td class="markdownTableBodyNone">TSC_G3_IO1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB0 (AF)   </td><td class="markdownTableBodyNone">TSC_G3_IO2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB1 (AF)   </td><td class="markdownTableBodyNone">TSC_G3_IO3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB2 (AF)   </td><td class="markdownTableBodyNone">TSC_G3_IO4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA9 (AF)   </td><td class="markdownTableBodyNone">TSC_G4_IO1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA10 (AF)   </td><td class="markdownTableBodyNone">TSC_G4_IO2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA13 (AF)   </td><td class="markdownTableBodyNone">TSC_G4_IO3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA14 (AF)   </td><td class="markdownTableBodyNone">TSC_G4_IO4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB3 (AF)   </td><td class="markdownTableBodyNone">TSC_G5_IO1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB4 (AF)   </td><td class="markdownTableBodyNone">TSC_G5_IO2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB6 (AF)   </td><td class="markdownTableBodyNone">TSC_G5_IO3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB7 (AF)   </td><td class="markdownTableBodyNone">TSC_G5_IO4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB11 (AF)   </td><td class="markdownTableBodyNone">TSC_G6_IO1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB12 (AF)   </td><td class="markdownTableBodyNone">TSC_G6_IO2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB13 (AF)   </td><td class="markdownTableBodyNone">TSC_G6_IO3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB14 (AF)   </td><td class="markdownTableBodyNone">TSC_G6_IO4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PE2 (AF)   </td><td class="markdownTableBodyNone">TSC_G7_IO1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PE3 (AF)   </td><td class="markdownTableBodyNone">TSC_G7_IO2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PE4 (AF)   </td><td class="markdownTableBodyNone">TSC_G7_IO3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PE5 (AF)   </td><td class="markdownTableBodyNone">TSC_G7_IO4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PD12 (AF)   </td><td class="markdownTableBodyNone">TSC_G8_IO1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PD13 (AF)   </td><td class="markdownTableBodyNone">TSC_G8_IO2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PD14 (AF)   </td><td class="markdownTableBodyNone">TSC_G8_IO3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PD15 (AF)   </td><td class="markdownTableBodyNone">TSC_G8_IO4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">-----------&mdash;   </td><td class="markdownTableBodyNone">--------------&mdash;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PB8 (AF)   </td><td class="markdownTableBodyNone">TSC_SYNC    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PB10 (AF)   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<p>+-----------------------------&mdash;+ </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_60925fc218da8ca7908795bf5f624060.html">Drivers</a></li><li class="navelem"><a class="el" href="dir_ffd5fe82a1151d2d55b576554a311323.html">STM32F3xx_HAL_Driver</a></li><li class="navelem"><a class="el" href="dir_a3c399bd28342bbc9ae61f332bf6b506.html">Src</a></li><li class="navelem"><a class="el" href="stm32f3xx__hal__tsc_8c.html">stm32f3xx_hal_tsc.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
